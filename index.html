<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‚ú® –ù–µ–æ–Ω–æ–≤–æ–µ —Ä–∏—Å–æ–≤–∞–Ω–∏–µ ‚ú®</title>
    <style>
        /* –°–ë–†–û–° –ò –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background: #000;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            touch-action: none; /* –í–∞–∂–Ω–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö: –æ—Ç–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
        }

        .container {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: #000;
            position: relative;
        }

        /* –í–ï–†–•–ù–Ø–Ø –ü–ê–ù–ï–õ–¨ –° –ò–ù–§–û–†–ú–ê–¶–ò–ï–ô */
        .info-panel {
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #ff69b4;
            text-shadow: 0 0 8px #ff1493, 0 0 16px #ff1493;
            font-size: 16px;
            font-weight: 500;
            border-bottom: 2px solid #ff1493;
            box-shadow: 0 0 15px rgba(255, 20, 147, 0.5);
            background: rgba(0, 0, 0, 0.9);
            z-index: 10;
        }

        .users-count {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .users-count::before {
            content: "üë•";
            font-size: 18px;
            filter: drop-shadow(0 0 5px #ff69b4);
        }

        .clear-btn {
            background: transparent;
            border: 2px solid #ff1493;
            color: #ff69b4;
            padding: 6px 16px;
            border-radius: 30px;
            font-size: 16px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 0 12px #ff1493;
            cursor: pointer;
            transition: all 0.2s;
            touch-action: manipulation;
        }

        .clear-btn:active {
            background: #ff1493;
            color: #000;
            transform: scale(0.95);
        }

        /* –û–°–ù–û–í–ù–ê–Ø –û–ë–õ–ê–°–¢–¨ –° –•–û–õ–°–¢–û–ú */
        .canvas-wrapper {
            flex: 1;
            position: relative;
            background: #000;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        canvas {
            display: block;
            width: 100%;
            height: 100%;
            background: #000;
            touch-action: none; /* –î–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è –ø–∞–ª—å—Ü–µ–º */
            cursor: crosshair;
        }

        /* –ü–û–î–°–ö–ê–ó–ö–ê –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–• */
        .hint {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            text-align: center;
            color: #ff69b4;
            font-size: 14px;
            opacity: 0.7;
            text-shadow: 0 0 5px #ff1493;
            pointer-events: none;
            background: rgba(0,0,0,0.5);
            padding: 8px;
            backdrop-filter: blur(2px);
        }

        @media (min-width: 768px) {
            .hint {
                bottom: 30px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="info-panel">
            <div class="users-count" id="userCount">üë§ 1 online</div>
            <button class="clear-btn" id="clearBtn">‚ú® –û—á–∏—Å—Ç–∏—Ç—å</button>
        </div>
        
        <div class="canvas-wrapper">
            <canvas id="drawCanvas"></canvas>
        </div>
        
        <div class="hint" id="hintText">
            üëÜ –†–∏—Å—É–π –ø–∞–ª—å—Ü–µ–º ‚Äî –≤–∏–¥–Ω–æ –≤—Å–µ–º!
        </div>
    </div>

    <script>
        (function() {
            // =========================================
            // –ù–ê–°–¢–†–û–ô–ö–ò
            // =========================================
            const STORAGE_KEY = 'neon_drawing_data';
            const BROADCAST_CHANNEL_NAME = 'neon_draw_channel';
            
            // –¶–≤–µ—Ç–∞ –∫–∏—Å—Ç–∏ (—Ä–æ–∑–æ–≤—ã–π –Ω–µ–æ–Ω)
            const COLORS = {
                STROKE: '#ff69b4',      // –û—Å–Ω–æ–≤–Ω–æ–π —Ä–æ–∑–æ–≤—ã–π
                SHADOW: '#ff1493',       // –¢–µ–º–Ω–æ-—Ä–æ–∑–æ–≤—ã–π –¥–ª—è —Å–≤–µ—á–µ–Ω–∏—è
                BACKGROUND: '#000000'
            };

            // =========================================
            // –ü–û–õ–£–ß–ê–ï–ú –≠–õ–ï–ú–ï–ù–¢–´
            // =========================================
            const canvas = document.getElementById('drawCanvas');
            const ctx = canvas.getContext('2d', { 
                willReadFrequently: false,
                alpha: false 
            });
            
            const userCountEl = document.getElementById('userCount');
            const clearBtn = document.getElementById('clearBtn');
            const hintEl = document.getElementById('hintText');

            // =========================================
            // –ü–ï–†–ï–ú–ï–ù–ù–´–ï –°–û–°–¢–û–Ø–ù–ò–Ø
            // =========================================
            let isDrawing = false;
            let lastX = 0;
            let lastY = 0;
            let canvasWidth = 0;
            let canvasHeight = 0;
            let drawingEnabled = true;     // –†–∏—Å–æ–≤–∞–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–µ–Ω–æ
            let userName = 'User_' + Math.floor(Math.random() * 1000);
            let activeUsers = new Set();
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–µ–±—è –≤ —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            activeUsers.add(userName);

            // =========================================
            // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ö–ê–ù–ê–õ–ê –°–í–Ø–ó–ò (BroadcastChannel)
            // =========================================
            const channel = new BroadcastChannel(BROADCAST_CHANNEL_NAME);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
            channel.onmessage = (event) => {
                const data = event.data;
                
                if (!data || !data.type) return;
                
                switch(data.type) {
                    case 'draw':
                        // –†–∏—Å—É–µ–º –ª–∏–Ω–∏—é –æ—Ç –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                        if (data.data && data.data.x0 !== undefined) {
                            drawLineFromData(data.data);
                        }
                        break;
                        
                    case 'clear':
                        // –û—á–∏—â–∞–µ–º —Ö–æ–ª—Å—Ç
                        clearCanvas(true); // true = –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –∫–æ–º–∞–Ω–¥—É
                        break;
                        
                    case 'user_joined':
                        // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                        if (data.user && data.user !== userName) {
                            activeUsers.add(data.user);
                            updateUserCount();
                        }
                        break;
                        
                    case 'user_left':
                        if (data.user) {
                            activeUsers.delete(data.user);
                            updateUserCount();
                        }
                        break;
                        
                    case 'sync_request':
                        // –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                        if (data.requester && data.requester !== userName) {
                            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                            sendCanvasImage();
                        }
                        break;
                        
                    case 'sync_image':
                        // –ü–æ–ª—É—á–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
                        if (data.imageData) {
                            restoreCanvasFromDataURL(data.imageData);
                        }
                        break;
                }
            };

            // =========================================
            // –§–£–ù–ö–¶–ò–ò –û–ë–ù–û–í–õ–ï–ù–ò–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô
            // =========================================
            function updateUserCount() {
                const count = activeUsers.size;
                userCountEl.textContent = `üë• ${count} online`;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É
                if (count > 1) {
                    hintEl.textContent = `üé® –†–∏—Å—É—é—Ç ${count} —á–µ–ª–æ–≤–µ–∫ ‚Äî –≤—Å—ë —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ!`;
                } else {
                    hintEl.textContent = 'üëÜ –†–∏—Å—É–π –ø–∞–ª—å—Ü–µ–º ‚Äî –≤–∏–¥–Ω–æ –≤—Å–µ–º!';
                }
            }

            // –£–≤–µ–¥–æ–º–ª—è–µ–º –æ –Ω–æ–≤–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
            function announceJoin() {
                setTimeout(() => {
                    channel.postMessage({
                        type: 'user_joined',
                        user: userName
                    });
                    
                    // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
                    channel.postMessage({
                        type: 'sync_request',
                        requester: userName
                    });
                }, 300);
            }

            // –£–≤–µ–¥–æ–º–ª—è–µ–º –æ–± —É—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –≤–∫–ª–∞–¥–∫–∏)
            window.addEventListener('beforeunload', () => {
                channel.postMessage({
                    type: 'user_left',
                    user: userName
                });
            });

            // =========================================
            // –ù–ê–°–¢–†–û–ô–ö–ê –•–û–õ–°–¢–ê
            // =========================================
            function resizeCanvas() {
                const wrapper = canvas.parentElement;
                if (!wrapper) return;
                
                canvasWidth = wrapper.clientWidth;
                canvasHeight = wrapper.clientHeight;
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                const currentImage = new Image();
                currentImage.src = canvas.toDataURL('image/png');
                
                // –ú–µ–Ω—è–µ–º —Ä–∞–∑–º–µ—Ä
                canvas.width = canvasWidth;
                canvas.height = canvasHeight;
                
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–æ–Ω –∏ —Å—Ç–∏–ª–∏
                ctx.fillStyle = COLORS.BACKGROUND;
                ctx.fillRect(0, 0, canvasWidth, canvasHeight);
                
                // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∏—Å—Ç–∏
                ctx.lineCap = 'round';
                ctx.lineJoin = 'round';
                ctx.strokeStyle = COLORS.STROKE;
                ctx.lineWidth = Math.max(5, Math.min(15, canvasWidth / 40));
                ctx.shadowColor = COLORS.SHADOW;
                ctx.shadowBlur = 15;
                ctx.shadowOffsetX = 0;
                ctx.shadowOffsetY = 0;
                
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
                currentImage.onload = () => {
                    ctx.drawImage(currentImage, 0, 0, canvasWidth, canvasHeight);
                };
                
                // –ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å, –ø—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–≤–ª—è–µ–º —á–µ—Ä–Ω—ã–π —Ñ–æ–Ω
            }

            // =========================================
            // –§–£–ù–ö–¶–ò–ò –†–ò–°–û–í–ê–ù–ò–Ø
            // =========================================
            function startDrawing(e) {
                e.preventDefault();
                if (!drawingEnabled) return;
                
                isDrawing = true;
                
                const coords = getCoordinates(e);
                if (!coords) return;
                
                lastX = coords.x;
                lastY = coords.y;
                
                // –†–∏—Å—É–µ–º —Ç–æ—á–∫—É –ø—Ä–∏ –∫–∞—Å–∞–Ω–∏–∏
                ctx.beginPath();
                ctx.arc(lastX, lastY, ctx.lineWidth / 2, 0, Math.PI * 2);
                ctx.fillStyle = COLORS.STROKE;
                ctx.shadowColor = COLORS.SHADOW;
                ctx.shadowBlur = 15;
                ctx.fill();
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ—á–∫—É
                sendDrawData(lastX, lastY, lastX, lastY, true);
            }

            function draw(e) {
                e.preventDefault();
                if (!isDrawing || !drawingEnabled) return;
                
                const coords = getCoordinates(e);
                if (!coords) return;
                
                const x = coords.x;
                const y = coords.y;
                
                if (x < 0 || x > canvasWidth || y < 0 || y > canvasHeight) {
                    stopDrawing();
                    return;
                }
                
                // –†–∏—Å—É–µ–º –ª–∏–Ω–∏—é
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(x, y);
                ctx.stroke();
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ –ª–∏–Ω–∏–∏
                sendDrawData(lastX, lastY, x, y, false);
                
                lastX = x;
                lastY = y;
            }

            function stopDrawing() {
                isDrawing = false;
                ctx.beginPath(); // –ù–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—ã–π –ø—É—Ç—å –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π –ª–∏–Ω–∏–∏
            }

            // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Å —É—á–µ—Ç–æ–º touch –∏ mouse
            function getCoordinates(e) {
                const rect = canvas.getBoundingClientRect();
                const scaleX = canvas.width / rect.width;
                const scaleY = canvas.height / rect.height;
                
                let clientX, clientY;
                
                if (e.touches) {
                    if (e.touches.length === 0) return null;
                    clientX = e.touches[0].clientX;
                    clientY = e.touches[0].clientY;
                } else {
                    clientX = e.clientX;
                    clientY = e.clientY;
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ö–æ–ª—Å—Ç–∞
                if (clientX < rect.left || clientX > rect.right || 
                    clientY < rect.top || clientY > rect.bottom) {
                    return null;
                }
                
                const x = (clientX - rect.left) * scaleX;
                const y = (clientY - rect.top) * scaleY;
                
                return {
                    x: Math.max(0, Math.min(canvasWidth, x)),
                    y: Math.max(0, Math.min(canvasHeight, y))
                };
            }

            // =========================================
            // –û–¢–ü–†–ê–í–ö–ê –î–ê–ù–ù–´–•
            // =========================================
            function sendDrawData(x0, y0, x1, y1, isDot) {
                const drawData = {
                    x0: Math.round(x0),
                    y0: Math.round(y0),
                    x1: Math.round(x1),
                    y1: Math.round(y1),
                    isDot: isDot || false,
                    lineWidth: ctx.lineWidth,
                    user: userName,
                    timestamp: Date.now()
                };
                
                channel.postMessage({
                    type: 'draw',
                    data: drawData
                });
            }

            // –†–∏—Å–æ–≤–∞–Ω–∏–µ –ª–∏–Ω–∏–∏ –∏–∑ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            function drawLineFromData(data) {
                if (!data || !data.x0 || !data.y0) return;
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                const currentStrokeStyle = ctx.strokeStyle;
                const currentShadowColor = ctx.shadowColor;
                const currentShadowBlur = ctx.shadowBlur;
                const currentLineWidth = ctx.lineWidth;
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–Ω–æ–π –ª–∏–Ω–∏–∏
                ctx.strokeStyle = COLORS.STROKE;
                ctx.shadowColor = COLORS.SHADOW;
                ctx.shadowBlur = 15;
                ctx.lineWidth = data.lineWidth || 5;
                
                if (data.isDot) {
                    // –†–∏—Å—É–µ–º —Ç–æ—á–∫—É
                    ctx.beginPath();
                    ctx.arc(data.x0, data.y0, ctx.lineWidth / 2, 0, Math.PI * 2);
                    ctx.fillStyle = COLORS.STROKE;
                    ctx.fill();
                } else {
                    // –†–∏—Å—É–µ–º –ª–∏–Ω–∏—é
                    ctx.beginPath();
                    ctx.moveTo(data.x0, data.y0);
                    ctx.lineTo(data.x1, data.y1);
                    ctx.stroke();
                }
                
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                ctx.strokeStyle = currentStrokeStyle;
                ctx.shadowColor = currentShadowColor;
                ctx.shadowBlur = currentShadowBlur;
                ctx.lineWidth = currentLineWidth;
            }

            // =========================================
            // –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –•–û–õ–°–¢–ê
            // =========================================
            function sendCanvasImage() {
                try {
                    const imageData = canvas.toDataURL('image/png');
                    channel.postMessage({
                        type: 'sync_image',
                        imageData: imageData,
                        user: userName
                    });
                } catch (e) {
                    console.log('–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:', e);
                }
            }

            function restoreCanvasFromDataURL(dataURL) {
                const img = new Image();
                img.src = dataURL;
                img.onload = () => {
                    // –û—á–∏—â–∞–µ–º —Ö–æ–ª—Å—Ç
                    ctx.fillStyle = COLORS.BACKGROUND;
                    ctx.fillRect(0, 0, canvasWidth, canvasHeight);
                    
                    // –†–∏—Å—É–µ–º –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                    ctx.drawImage(img, 0, 0, canvasWidth, canvasHeight);
                };
            }

            // =========================================
            // –û–ß–ò–°–¢–ö–ê –•–û–õ–°–¢–ê
            // =========================================
            function clearCanvas(fromBroadcast = false) {
                ctx.fillStyle = COLORS.BACKGROUND;
                ctx.fillRect(0, 0, canvasWidth, canvasHeight);
                
                if (!fromBroadcast) {
                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–º–∞–Ω–¥—É –æ—á–∏—Å—Ç–∫–∏ –¥—Ä—É–≥–∏–º
                    channel.postMessage({
                        type: 'clear',
                        user: userName
                    });
                }
            }

            // =========================================
            // –ü–û–î–ü–ò–°–ö–ê –ù–ê –°–û–ë–´–¢–ò–Ø
            // =========================================
            function setupEventListeners() {
                // –ú—ã—à—å
                canvas.addEventListener('mousedown', startDrawing);
                canvas.addEventListener('mousemove', draw);
                canvas.addEventListener('mouseup', stopDrawing);
                canvas.addEventListener('mouseleave', stopDrawing);
                
                // –¢–∞—á (–º–æ–±–∏–ª—å–Ω—ã–µ)
                canvas.addEventListener('touchstart', startDrawing, { passive: false });
                canvas.addEventListener('touchmove', draw, { passive: false });
                canvas.addEventListener('touchend', stopDrawing);
                canvas.addEventListener('touchcancel', stopDrawing);
                
                // –û—á–∏—Å—Ç–∫–∞
                clearBtn.addEventListener('click', () => clearCanvas(false));
                
                // –†–µ—Å–∞–π–∑ –æ–∫–Ω–∞
                window.addEventListener('resize', () => {
                    resizeCanvas();
                });
                
                // –ó–∞–ø—Ä–µ—â–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –Ω–∞ —Ö–æ–ª—Å—Ç–µ
                canvas.addEventListener('contextmenu', (e) => e.preventDefault());
            }

            // =========================================
            // –ó–ê–ü–£–°–ö
            // =========================================
            function init() {
                resizeCanvas();
                setupEventListeners();
                
                // –û–ø–æ–≤–µ—â–∞–µ–º –æ —Å–µ–±–µ
                announceJoin();
                
                // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é (—Ä–∞–∑ –≤ 30 —Å–µ–∫—É–Ω–¥)
                setInterval(() => {
                    if (activeUsers.size > 1) {
                        sendCanvasImage();
                    }
                }, 30000);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                updateUserCount();
                
                console.log('‚ú® –ù–µ–æ–Ω–æ–≤–æ–µ —Ä–∏—Å–æ–≤–∞–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ!');
            }

            // –°—Ç–∞—Ä—Ç—É–µ–º –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', init);
            } else {
                init();
            }
        })();
    </script>
</body>
</html>
